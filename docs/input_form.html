<!DOCTYPE html>
<html>
<head>
  <title>Catalog Agrogeophysic</title>
  <meta charset="utf-8">
<!--  <link href="css/form.css" rel="stylesheet">
 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS File -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

  <!-- Favicons -->
  <link href="img/favicon.png" rel="icon">
  <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,500,600,700,700i|Montserrat:300,400,500,600,700" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">


  <!-- Libraries CSS Files -->
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="lib/animate/animate.min.css" rel="stylesheet">
  <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
<!--  <link href="css/style.css" rel="stylesheet">
 -->  <link href="css/style_contrib_details.css" rel="stylesheet">


    <title>Input contribution form</title>

<style type="text/css">

#imgfixed
{
    top:20px;
    background: blue;
    position: fixed;
    width: 25%;
}

/* Style the form */
#regForm {
  background-color: #ffffff;
  margin: 100px auto;
  padding: 40px;
  width: 70%;
  min-width: 300px;
}


</style>

<script>
function toggleField(hideObj,showObj){
  hideObj.disabled=true;
  hideObj.style.display='none';
  showObj.disabled=false;
  showObj.style.display='inline';
  showObj.focus();
}
</script>

</head>


<body>




  <header id="header_home">
          <nav class="main-nav float-right d-none d-lg-block">
            <ul>
              <li class="active"><a href="index.html">Home</a></li>
          </nav>
        <div class="container">
          <div class="logo float-left">
            <!-- Uncomment below if you prefer to use an image logo -->
            <h1 class="text-light"><a href="catalog.html" class="scrollto"><span>Catalog of agrogeophysical studies</span></a></h1>

            <!-- <a href="#header" class="scrollto"><img src="img/logo.png" alt="" class="img-fluid"></a> -->
          </div>
        </div>
      </header>




  <section id="about">
      <div class="container">
<!--         <div class="row">
 -->
    <h3>Add a contribution</h3>

    <p>Thanks to users feedback the form is improving bit by bit. Please comment for missing information that you would consider relevant to highlight your contribution. </p>

    <p>If you want to report any problem please open an issue into the catalog-github: <a href='https://github.com/agrogeophy/catalog/issues' target="_blank"> report an issue </a></p>


    <form id="contributionForm" enctype="multipart/form-data" action="" style="margin:5%;">

<!----------------------------------->
<!-- Contact description  -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3>Contact details</h3>
<!--           <p></p>
 -->        </header>
            <div class="form-group row required">
              <label for="surname" class="col-sm-2 col-form-label">Surname</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="surname" name="surname" placeholder="e.g. Jon" required>
              </div>
            </div>

          <div class="form-group row required">
            <label for="name" class="col-sm-2 col-form-label">Name</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="name" name="name" placeholder="e.g. Snow ..." required>
            </div>
          </div>

          <div class="form-group row required">
            <label for="organisation" class="col-sm-2 col-form-label">First author organisation</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="organisation" name="organisation" placeholder="e.g. Winterfell University" required>
            </div>
          </div>

        <div class="form-group row">
          <label for="email" class="col-sm-2 col-form-label">Contact Email</label>
          <div class="col-sm-10">
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter Email">
          </div>
        </div>

  </div>


<!----------------------------------->
<!-- Contribution description  -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3>Contribution details</h3>
         </header>
        <div class="form-group row">
          <label for="contributionType" class="col-sm-2 col-form-label">Contribution Type*</label>
          <div class="col-sm-10">
            <select class="form-control" name="contribution_type">
              <option>Peer reviewed publication</option>
              <option>Preprint</option>
              <option>Book</option>
              <option>Dataset</option>
            </select>
          </div>
        </div>

          <div class="form-group row required">
            <label for="title" class="col-sm-2 col-form-label">Title*</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="title" placeholder="My Agrogeophysical Survey" required>
            </div>
          </div>

        <div class="form-group row">
          <label for="publiDate" class="col-sm-2 col-form-label">Date*</label>
          <div class="col-sm-10">
            <input type="date" class="form-control" name="publication_date" required>
          </div>
        </div>

      <div class="form-group row">
        <label for="publicationLink" class="col-sm-2 col-form-label">Publication Link (DOI)*</label>
        <div class="col-sm-10">
          <input type="url" class="form-control" name="publication_link" placeholder="Enter publication link (DOI) as URL. e.g. https://doi.org/10.1016/j.cageo.2020.104423" required>
        </div>
      </div>

          <div class="form-group row required">
            <label for="authors" class="col-sm-2 col-form-label">Author(s) (semi-colon separated)*</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" name="authors" placeholder="e.g. J. Snow; A. Christie; ..." required>
            </div>
          </div>

        <div class="form-group row">
          <label for="keywords" class="col-sm-2 col-form-label">Keywords (semi-colon separated)*</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" name="keywords" placeholder="e.g. hydrogeophysics; vineyard; ERT" required>
          </div>
        </div>

      <!-- <div class="form-group row" enctype="multipart/form-data">
          <label for="keyFigure" class="col-sm-2 col-form-label">Key figure</label>
          <div class="col-sm-10">
            <input type="file" class="form-control-file" name="keyFigure">
          </div>
      </div> -->
        <div class="form-group row">
          <label for="comment" class="col-sm-2 col-form-label">Comment</label>
          <div class="col-sm-10">
            <input type="url" class="form-control" name="comment" placeholder="Review paper, ...">
          </div>
       </div>
  </div>


<!----------------------------------->
<!-- Survey description  -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3 id="howtocontribute">Survey description</h3>
          <p>Please indicate the location where the data were collected or the location
            of your laboratory location for synthetic and lab studies. This location will be
          displayed in the interactive map on the catalog website.</p>
        </header>

        <div class="form-group row">
          <label for="longitude" class="col-sm-2 col-form-label">Longitude*</label>
          <div class="col-sm-10">
            <input type="number" class="form-control" name="longitude" placeholder="Longitude as decimal degree (WGS84)" step="any" required>
          </div>
        </div>

        <div class="form-group row">
          <label for="latitude" class="col-sm-2 col-form-label">Latitude*</label>
          <div class="col-sm-10">
            <input type="number" class="form-control" name="latitude" placeholder="Latitude as decimal degree (WGS84)" step="any" required>
          </div>
        </div>

      <div class="form-group row">
        <label for="method" class="col-sm-2 col-form-label">Methods used*</label>
        <div class="col-sm-10">
          <select multiple class="form-control add-select" name="method" required>
            <option>ERT (DC only)</option>
            <option>EIT (DC and IP)</option>
            <option>TDIP</option>
            <option>SIP</option>
            <option>MALM</option>
            <option>FDEM</option>
            <option>TDEM</option>
            <option>SNMR</option>
            <option>MRI</option>
            <option>Seismic</option>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <label for="spatial_scale" class="col-sm-2 col-form-label">Spatial Scale*</label>
        <div class="col-sm-10">
          <!-- <select multiple class="form-control" id="SpatialScale" name="SpatialScale"> -->
          <select class="form-control form-select" name="spatial_scale" required>
            <option>Laboratory</option>
            <option selected>Field</option>
            <option>Catchement</option>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <label for="temporal_scale" class="col-sm-2 col-form-label">Temporal Scale*</label>
        <div class="col-sm-10">
          <select multiple class="form-control add-select" name="temporal_scale" required>
            <option selected>None (one time survey)</option>
            <option>Minutes</option>
            <option>Hours</option>
            <option>Days</option>
            <option>Months</option>
            <option>Years</option>
          </select>
        </div>
      </div>

    <fieldset class="form-group">
      <div class="row">
        <legend class="col-form-label col-sm-2 pt-0">Temperature correction</legend>
        <div class="col-sm-10">
          <div class="form-check">
            <input class="form-check-input" type="radio" id="temperature_no" name="temperature_correction" value="no" checked>
            <label class="form-check-label" for="temperature_correction">
              No
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" id="temperature_yes" name="temperature_correction" value="yes">
            <label class="form-check-label" for="temperature_correction">
              Yes
            </label>
          </div>
        </div>
      </div>
    </fieldset>

    <div class="form-group row">
      <label for="instrument" class="col-sm-2 col-form-label">Instrument</label>
      <div class="col-sm-10">
        <select multiple class="form-control add-select" name="instrument">
          <option>Iris Instruments - Syscal Pro</option>
          <option>ABEM - Resistivity meter</option>
          <option>Geonics - EM31</option>
          <option>Geonics - EM38</option>
          <option>GF Instruments - CMD Mini-Explorer</option>
          <option>GF Instruments - CMD Mini-Explorer Special edition</option>
          <option>GF Instruments - CMD Explorer</option>
          <option>DUALEM - DUALEM 421S</option>
          <option>Geophex- GEM 2</option>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for=dimension class="col-sm-2 col-form-label">Dimension*</label>
      <div class="col-sm-10">
        <select class="form-control add-select" name="dimension" required>
          <option>1D</option>
          <option>2D</option>
          <option>3D</option>
        </select>
      </div>
    </div>

<!--TODO add timelapse or not -->

    <fieldset class="form-group">
      <div class="row">
        <legend class="col-form-label col-sm-2 pt-0">Permanent setup*</legend>
        <div class="col-sm-10">
          <div class="form-check">
            <input class="form-check-input" type="radio" id="permanent_setup_no" name="permanent_setup" value="no" checked>
            <label class="form-check-label" for="permanent_setup">
              No
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" id="permanent_setup_yes" name="permanent_setup" value="yes">
            <label class="form-check-label" for="permanent_setup">
              Yes
            </label>
          </div>
        </div>
      </div>
    </fieldset>
</div>



<!----------------------------------->
<!-- Processing tools description  -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3>Processing tools</h3>
          <p>Please indicate your processing tools</p>
        </header>

        <div class="form-group row">
          <label for="software_name" class="col-sm-2 col-form-label">Software Name</label>
          <div class="col-sm-10">
            <div class="col-sm-10">
              <select multiple class="form-control add-select"  name="software_licence">
                <option>Custom scripts</option>
                <option>R2, cR2, R3t, cR3t, ResIPy</option>
                <option>Res2Dinv; Res3Dinv</option>
                <option>CRTomo</option>
                <option>pyGimli, BERT</option>
                <option>SimPEG</option>
                <option>ERTLab</option>
                <option>Reflex 2D, Reflex 3D</option>
                <option>GPRmax</option>
                <option>EM4Soil</option>
                <option>Femics</option>
                <option>EMagPy</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <label for="software_licence" class="col-sm-2 col-form-label">Software Licence</label>
          <div class="col-sm-10">
            <select multiple class="form-control add-select"  name="software_licence">
              <option>Open source</option>
              <option>Freeware</option>
              <option>Proprietary</option>
            </select>
          </div>
        </div>
  </div>


<!----------------------------------->
<!-- Abiotic tools description  -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3>Biotic description</h3>
        </header>

        <div class="form-group row">
          <label for="plant" class="col-sm-2 col-form-label">Plant*</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" name="plant" placeholder="e.g. Triciticum aestivum L. (Winter wheat)" required>
          </div>
        </div>

        <div class="form-group row">
          <label for="organ" class="col-sm-2 col-form-label">Organ studied*</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" name="organ" placeholder="e.g. Roots, stem" required>
          </div>
        </div>
</div>
<!----------------------------------->
<!-- Abiotic tools description  -->
<!----------------------------------->

 <div class="container">
    <header class="section-header">
      <h3 id="howtocontribute">Abiotic description</h3>
    </header>

    <div class="form-group row">
      <label for="soil" class="col-sm-2 col-form-label">Soil type*</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name="soil" placeholder="e.g. Cambisol, clayey loam">
      </div>
    </div>

    <div class="form-group row">
      <label for="water" class="col-sm-2 col-form-label">Water use</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name="water" placeholder="e.g. irrigated, rain-fed, none">
      </div>
    </div>

 </div>

<!----------------------------------->
<!-- Ancillary measurements        -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3 id="howtocontribute">Ancillary measurements</h3>
<!--           <p></p>
 -->        </header>

      <div class="form-group row">
        <label for="ancillary_data" class="col-sm-2 col-form-label">Ancillary data</label>
        <div class="col-sm-10">
          <select multiple class="form-control add-select" name="ancillary_data">
            <option>Meteorological data</option>
            <option>Evapotranspiration</option>
            <option>Soil Water Content</option>
          </select>
        </div>
      </div>

<!----------------------------------->
<!-- Companion notebook  -->
<!----------------------------------->

 <div class="container">
        <header class="section-header">
          <h3>Companion notebook</h3>
           <p>Once you have completed the form you can attach a notebook to the mail
           to be sent (.ipynb) file. Please specify below what the notebook does.</p>
        </header>

      <div class="form-group row">
        <label for="notebook_purpose" class="col-sm-2 col-form-label">Notebook purpose</label>
        <div class="col-sm-10">
          <select multiple class="form-control add-select" name="notebook_purpose">
            <option>Establish Pedophysical relationships</option>
            <option>Data inversion</option>
            <option>Forward model</option>
            <option>Data processing</option>
          </select>
        </div>
      </div>
</div>


 <div class="container">
        <header class="section-header">
          <h3 id="howtocontribute">Companion dataset</h3>
<!--           <p></p>
 -->        </header>

        <div class="form-group row">
          <label for="dataset_link" class="col-sm-2 col-form-label">Data Link (DOI)</label>
          <div class="col-sm-10">
            <input type="url" class="form-control" name="dataset_link" placeholder="Enter DOI (if applicable) without URL. e.g. 10.5281/zenodo.2530059">
          </div>
        </div>

        <div class="form-group row">
          <label for="dataset_licence" class="col-sm-2 col-form-label">Dataset Licence</label>
          <div class="col-sm-10">
            <select class="form-control add-select" name="dataset_licence">
              <option>Open source</option>
              <option>Proprietary</option>
            </select>
          </div>
        </div>
        <div class="form-group row">
          <label for="dataset_comment" class="col-sm-2 col-form-label">Dataset comment</label>
          <div class="col-sm-10">
            <input type="url" class="form-control" name="dataset_comment" placeholder="Enter a comment about the dataset">
          </div>
        </div>
</div>

 <div class="container">
        <header class="section-header">
          <h5>Something missing? please add a comment</h5>
<!--           <p></p>
 -->        </header>

        <div class="form-group row">
          <label for="comment" class="col-sm-2 col-form-label">Comment</label>
          <div class="col-sm-10">
            <input type="url" class="form-control"name="comment"
            placeholder="Enter a comment if we miss information in this form.">
          </div>
        </div>


</div>
    <p>You can now:
    <ul>
      <li> send the form via email </li>
      <li> attach any cover picture or notebook (.ipynb) to it. Please let us know if you need to Licence your cover picture. </li>
      <li> Please keep the subject line and keep the CSV string as it is. </li>
    </ul>
    </p>
    <button onclick='sendMail();' class="btn btn-primary" value="">Send form via email</button>
  </form>
</div>


</section>


<script type="text/javascript">


  function sendMail() {
    let form = document.querySelector('form')
    let data = new FormData(form)
    console.log(data)

    // format answers as CSV string (ORDER MATTERS)
    let content = ''
    content += 'id,surname,name,organisation,email,contribution_type,title,publication_date,publication_link,authors,keywords,latitude,longitude,method,spatial_scale,temporal_scale,temperature_correction,instrument,dimension,permanent_setup,software_name,software_licence,plant,organ,soil,water,ancillary_data,notebook_filename,notebook_purpose,dataset_link,dataset_licence,dataset_comment,comment\n'
    content += '0,' // to be changed at insertion time ofc
    content += data.get('surname') + ','
    content += data.get('name') + ','
    content += data.get('organisation') + ','
    content += data.get('email') + ','
    content += data.get('contribution_type') + ','
    content += data.get('title') + ','
    content += data.get('publication_date') + ','
    content += data.get('publication_link') + ','
    content += data.get('authors') + ','
    content += data.get('keywords') + ','
    content += data.get('latitude') + ','
    content += data.get('longitude') + ','
    content += data.get('method') + ','
    content += data.get('spatial_scale') + ','
    content += data.get('temporal_scale') + ','
    content += data.get('temperature_correction') + ','
    content += data.get('instrument') + ','
    content += data.get('dimension') + ','
    content += data.get('permanent_setup') + ','
    content += data.get('software_name') + ','
    content += data.get('software_licence') + ','
    content += data.get('plant') + ','
    content += data.get('organ') + ','
    content += data.get('soil') + ','
    content += data.get('water') + ','
    content += data.get('ancillary_data') + ','
    content += ',' // notebook_filename (to be filled by admin)
    content += data.get('notebook_purpose') + ','
    content += data.get('dataset_link') + ','
    content += data.get('dataset_licence') + ','
    content += data.get('dataset_comment') + ','
    content += data.get('comment')
    console.log(content)
    // TODO what about user comments?


    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();

    today = mm + '/' + dd + '/' + yyyy;
    //document.write(today);


    let mailtoHeader = "mailto:hello.agrogeophy@gmail.com?subject=CAGS%20contribution%20" + data.get('surname') + "%20" + data.get('name') + "%20" + today + "%20" + "&body="

    content = encodeURIComponent(content)

    // form the mailto link
    if ((data.get('surname') != '')
      && (data.get('name') != '')
      && (data.get('organisation') != '')
      && (data.get('title') != '')
      && (data.get('authors') != '')) {
        console.log('form sent to mailto')
        window.location = mailtoHeader + content
      } else {
        console.log('some mandatory fields are blank')
      }
    }

</script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>


<a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>
  <!--==========================
  -- JavaScript Libraries
  ============================-->

<!-- form
 -->

<!-- JavaScript Libraries -->
<script src="lib/jquery/jquery.min.js"></script>
<script src="lib/jquery/jquery-migrate.min.js"></script>
<script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/mobile-nav/mobile-nav.js"></script>
<script src="lib/wow/wow.min.js"></script>
<script src="lib/waypoints/waypoints.min.js"></script>
<script src="lib/counterup/counterup.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>
<script src="lib/isotope/isotope.pkgd.min.js"></script>
<script src="lib/lightbox/js/lightbox.min.js"></script>

<!-- Template Main Javascript File -->
<script src="js/main.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>


 <script>
    // this add possibility to add custom text to select boxes
  $(".add-select").select2({
   tags: true
  });
</script>

</html>
